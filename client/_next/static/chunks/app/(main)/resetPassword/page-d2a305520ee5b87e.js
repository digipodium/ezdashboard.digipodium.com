(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9386],{37334:function(e,t,s){Promise.resolve().then(s.bind(s,84687))},84687:function(e,t,s){"use strict";s.r(t);var r=s(57437),n=s(69763),a=s(2265),i=s(46338),o=s(16031),l=s(49835),u=s(83278),c=s(7238),d=s(80711),h=s(78715),m=s(27825),w=s(68765),p=s(77912),P=s(47907),f=s(49079);t.default=()=>{let e=(0,a.useRef)(null),t=(0,a.useRef)(null),[s,y]=(0,a.useState)(null),[v,x]=(0,a.useState)(!1),b=(0,P.useRouter)(),g=async()=>{let t=await fetch("".concat(f.env.NEXT_PUBLIC_API_URL,"/user/getbyemail/").concat(e.current.value));return y(await t.json()),200===t.status},_=async()=>{if(!await g()){(0,n.yv)("Email not registered",{variant:"error"});return}let t=await fetch("".concat(f.env.NEXT_PUBLIC_API_URL,"/util/sendotp"),{method:"POST",body:JSON.stringify({email:e.current.value}),headers:{"Content-Type":"application/json"}});console.log(t.status),201===t.status?(0,n.yv)("OTP sent successfully",{variant:"success"}):(0,n.yv)("Something went wrong",{variant:"error"})},j=async()=>{200===(await fetch("".concat(f.env.NEXT_PUBLIC_API_URL,"/util/verifyotp/").concat(e.current.value,"/").concat(t.current.value))).status?x(!0):(0,n.yv)("Invalid OTP",{variant:"error"})},T=async e=>{200===(await fetch("".concat(f.env.NEXT_PUBLIC_API_URL,"/user/update/").concat(s._id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).status?((0,n.yv)("Password updated successfully",{variant:"success"}),b.push("/login")):(0,n.yv)("Something went wrong",{variant:"error"})},I=(0,p.c)({initialValues:{password:"",confirmPassword:""},validate:{password:e=>e.length<3?"Password is too short":null,confirmPassword:(e,t)=>e!==t.password?"Passwords did not match":null}});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Paper,{children:(0,r.jsxs)(o.Container,{w:"100%",size:460,children:[(0,r.jsx)(l.Title,{order:1,mb:30,style:{textAlign:"center"},children:"Reset Your Password"}),(0,r.jsx)(u.TextInput,{required:!0,label:"Enter Registered Email",placeholder:"youremail@mail.com",leftSection:(0,r.jsx)(m.Z,{style:{width:(0,c.h)(16),height:(0,c.h)(16)}}),radius:"md",ref:e}),(0,r.jsx)(d.Button,{onClick:_,type:"submit",mt:10,radius:"xl",children:"Send OTP"}),(0,r.jsx)(u.TextInput,{mt:20,required:!0,label:"Enter OTP",placeholder:"XXXXXX",leftSection:(0,r.jsx)(w.Z,{style:{width:(0,c.h)(16),height:(0,c.h)(16)}}),radius:"md",ref:t}),(0,r.jsx)(d.Button,{onClick:j,type:"submit",mt:10,mb:30,radius:"xl",children:"Verify OTP"}),v&&(0,r.jsxs)("form",{onSubmit:I.onSubmit(T),children:[(0,r.jsx)(l.Title,{order:3,mb:20,style:{textAlign:"center"},children:"Enter New Password"}),(0,r.jsx)(h.PasswordInput,{mb:"xl",withAsterisk:!0,label:"Password",placeholder:"Your password",size:"md",...I.getInputProps("password")}),(0,r.jsx)(h.PasswordInput,{mb:"xl",withAsterisk:!0,label:"Confirm Password",placeholder:"Confirm password",size:"md",...I.getInputProps("confirmPassword")}),(0,r.jsx)(d.Button,{fullWidth:!0,mt:"xl",size:"md",type:"submit",children:"Reset Password"})]})]})})})}}},function(e){e.O(0,[6242,711,3278,9763,579,2971,8069,1744],function(){return e(e.s=37334)}),_N_E=e.O()}]);